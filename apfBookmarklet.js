!function(e){var t={};function i(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(o,r,function(t){return e[t]}.bind(null,r));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=d(i(1)),r=d(i(3)),s=d(i(5)),a=d(i(6)),n=d(i(7));function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i(8);let l={runtime:{}};l.runtime.sendMessage=function(e){};
/* @preserve - Start User Config */
let c=n.default._defaults;c.words=n.default._defaultWords;
/* @preserve - End User Config */
class h extends r.default{constructor(){super(),u(this,"advanced",void 0),u(this,"audio",void 0),u(this,"audioOnly",void 0),u(this,"cfg",void 0),u(this,"hostname",void 0),u(this,"iframe",void 0),u(this,"mutePage",void 0),u(this,"summary",void 0),u(this,"youTubeMutePage",void 0),this.advanced=!1,this.mutePage=!1,this.summary={}}advancedPage(){return o.default.domainMatch(this.hostname,this.cfg.advancedDomains)}advancedReplaceText(e){m.wordRegExps.forEach(t=>{findAndReplaceDOMText(e,{preset:"prose",find:t,replace:function(e,t){return 0===e.index?m.replaceText(t[0]):""}})})}checkMutationForProfanity(e){e.addedNodes.forEach(e=>{s.default.isForbiddenNode(e)||(m.mutePage?m.cleanAudio(e):m.audioOnly||m.cleanNodeText(e))}),m.mutePage&&m.audio.muted&&e.removedNodes.forEach(e=>{(!1!==m.audio.supportedNode(e)||e==m.audio.lastFilteredNode||m.audio.simpleUnmute&&m.audio.lastFilteredText&&m.audio.lastFilteredText.includes(e.textContent))&&m.audio.unmute()}),e.target&&"#text"===e.target.nodeName&&m.checkMutationTargetTextForProfanity(e)}checkMutationTargetTextForProfanity(e){if(!s.default.isForbiddenNode(e.target)){let t=!!m.mutePage&&m.audio.supportedNode(e.target);if(!1!==t&&m.audio.simpleUnmute)m.audio.muted&&e.oldValue&&m.audio.lastFilteredText&&m.audio.lastFilteredText.includes(e.oldValue)&&m.audio.unmute(),m.audio.clean(e.target,t);else if(m.mutePage&&m.audio.simpleUnmute&&m.audio.muted&&!e.target.parentElement)m.audio.lastFilteredText&&m.audio.lastFilteredText.includes(e.target.textContent)&&m.audio.unmute();else if(!m.audioOnly){let t=this.replaceTextResult(e.target.data);t.modified&&(e.target.data=t.filtered)}}}cleanAudio(e){if(m.audio.youTube&&m.audio.youTubeAutoSubsPresent())m.audio.youTubeAutoSubsSupportedNode(e)?m.audio.youTubeAutoSubsCurrentRow(e)?m.audio.cleanYouTubeAutoSubs(e):m.audioOnly||m.cleanNodeText(e):m.audioOnly||m.audio.youTubeAutoSubsNodeIsSubtitleText(e)||m.cleanNodeText(e);else{let t=m.audio.supportedNode(e);!1!==t?m.audio.clean(e,t):m.audioOnly||m.cleanNodeText(e)}}cleanNode(e,t=!0){if(s.default.isForbiddenNode(e))return!1;if(e.childElementCount>0){let i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT);for(;i.nextNode();)i.currentNode.childNodes.length>0?i.currentNode.childNodes.forEach(e=>{this.cleanNode(e,t)}):this.cleanNode(i.currentNode,t)}else if(e.nodeName)if(e.textContent&&""!=e.textContent.trim()){let i=this.replaceTextResult(e.textContent,t);i.modified&&(e.textContent=i.filtered)}else"IMG"==e.nodeName?(""!=e.alt&&(e.alt=this.replaceText(e.alt,t)),""!=e.title&&(e.title=this.replaceText(e.title,t))):null!=e.shadowRoot&&f.observe(e.shadowRoot,g)}cleanNodeText(e){m.advanced&&(e.parentNode||e===document)?m.advancedReplaceText(e):m.cleanNode(e)}cleanPage(){this.cfg=new n.default(c),this.cfg.muteMethod=1;let e={disabled:this.disabledPage()};if(e.disabled)return l.runtime.sendMessage(e),!1;this.advanced=this.advancedPage(),this.cfg.muteAudio&&(this.audio=new a.default(this),this.mutePage=this.audio.supportedPage,this.youTubeMutePage=this.audio.youTube),this.init(),this.audioOnly||this.cleanNodeText(document),p.observe(document,g)}disabledPage(){return this.cfg.enabledDomainsOnly?!o.default.domainMatch(this.hostname,this.cfg.enabledDomains):o.default.domainMatch(this.hostname,this.cfg.disabledDomains)}processMutations(e){e.forEach((function(e){m.checkMutationForProfanity(e)}))}replaceTextResult(e,t=!0){let i={};return i.original=e,i.filtered=m.replaceText(e,t),i.modified=i.filtered!=e,i}updateCounterBadge(){}}t.default=h;let p,f,m=new h,g={characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0};if("undefined"!=typeof window){if(p=new MutationObserver(m.processMutations),f=new MutationObserver(m.processMutations),window!=window.top){m.iframe=document.location;try{m.hostname=window.parent.location.hostname}catch(e){document.referrer?m.hostname=new URL(document.referrer).hostname:m.hostname=document.location.hostname}}else m.hostname=document.location.hostname;m.cleanPage()}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(2);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class s{constructor(){r(this,"tab",void 0),r(this,"url",void 0),r(this,"hostname",void 0)}static domainMatch(e,t){let i=!1;for(let o=0;o<t.length;o++){if(new RegExp("(^|.)"+t[o],"i").test(e)){i=!0;break}}return i}static removeFromList(e,t){let i,r=t;for(let s=0;s<t.length;s++)i=new RegExp("(^|.)"+t[s],"i"),i.test(e)&&(r=(0,o.removeFromArray)(r,t[s]));return r}static getCurrentTab(){return new Promise((function(e,t){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){e(t[0])}))}))}async load(){this.tab=await s.getCurrentTab(),this.url=new URL(this.tab.url),this.hostname=this.url.hostname}}t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dynamicList=function(e,t,i){let o="";void 0!==i&&(o='<option value="" disabled selected>'+i+"</option>");for(let t=0;t<e.length;t++)o+='<option value="'+e[t]+'">'+e[t]+"</option>";document.getElementById(t).innerHTML=o},t.escapeHTML=function(e){return e.replace(/([<>&"'])/g,(e,t)=>({"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"})[t])},t.exportToFile=function(e,t="data.txt"){let i="data:application/json;charset=utf-8,"+encodeURIComponent(e),o=document.createElement("a");o.setAttribute("href",i),o.setAttribute("download",t),o.click(),o.remove()},t.getVersion=function(e){let t=e.split(".");return{major:parseInt(t[0]),minor:parseInt(t[1]),patch:parseInt(t[2])}},t.isVersionOlder=function(e,t){if(e.major<t.major)return!0;if(e.major==t.major&&e.minor<t.minor)return!0;if(e.major==t.major&&e.minor==t.minor&&e.patch<t.patch)return!0;return!1},t.readFile=function(e){return new Promise((t,i)=>{let o=new FileReader;o.onload=()=>{t(o.result)},o.readAsText(e)})},t.removeFromArray=function(e,t){return e.filter(e=>e!==t)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=(o=i(4))&&o.__esModule?o:{default:o};function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.default=class{constructor(){s(this,"cfg",void 0),s(this,"counter",void 0),s(this,"iWhitelist",void 0),s(this,"whitelist",void 0),s(this,"wordList",void 0),s(this,"wordRegExps",void 0),this.counter=0,this.iWhitelist=[],this.whitelist=[],this.wordList=[],this.wordRegExps=[]}checkWhitelist(e,t,i,o){let s=this,a=s.whitelist.length,n=s.iWhitelist.length;if(a||n){if(a&&s.whitelist.includes(e))return!0;if(n&&s.iWhitelist.includes(e.toLowerCase()))return!0;let d=r.default.find(o);if(1===d.matchMethod){let o,u={matchMethod:2,sub:d.sub,repeat:d.matchRepeated},l=new r.default(e,u).buildRegexp();for(;null!==(o=l.exec(t));){let t=4==o.length?o[2]:o[0],r=4==o.length?o.index+o[1].length:o.index;if(r<=i&&r+t.length>=i+e.length){if(a&&s.whitelist.includes(t))return!0;if(n&&s.iWhitelist.includes(t.toLowerCase()))return!0}}}}return!1}foundMatch(e){this.counter++}init(){let e={filterMethod:this.cfg.filterMethod,globalMatchMethod:this.cfg.globalMatchMethod},t={matchMethod:this.cfg.defaultWordMatchMethod,repeat:this.cfg.defaultWordRepeat,separators:this.cfg.defaultWordSeparators,sub:this.cfg.defaultSubstitution};r.default.initWords(this.cfg.words,e,t),this.wordList=r.default.list,this.wordRegExps=r.default.regExps,this.whitelist=this.cfg.wordWhitelist,this.iWhitelist=this.cfg.iWordWhitelist}replaceText(e,t=!0){let i=this;switch(i.cfg.filterMethod){case 0:i.wordRegExps.forEach((o,r)=>{e=e.replace(o,(function(e,...o){let s=o.pop(),a=o.pop(),n=o,d=n.length>0;if(d&&(e=n[1]),i.checkWhitelist(e,s,a,r))return e;t&&i.foundMatch(i.wordList[r]);let u="",l=i.cfg.censorFixedLength>0?i.cfg.censorFixedLength:e.length;return u=i.cfg.preserveFirst&&i.cfg.preserveLast?e[0]+i.cfg.censorCharacter.repeat(l-2)+e.slice(-1):i.cfg.preserveFirst?e[0]+i.cfg.censorCharacter.repeat(l-1):i.cfg.preserveLast?i.cfg.censorCharacter.repeat(l-1)+e.slice(-1):i.cfg.censorCharacter.repeat(l),d&&(u=n[0]+u+n[2]),u}))});break;case 1:i.wordRegExps.forEach((o,s)=>{e=e.replace(o,(function(e,...o){let a=o.pop(),n=o.pop(),d=o,u=d.length>0;if(u&&(e=d[1]),i.checkWhitelist(e,a,n,s))return e;t&&i.foundMatch(i.wordList[s]);let l=i.cfg.words[i.wordList[s]].sub||i.cfg.defaultSubstitution;return i.cfg.preserveCase&&(r.default.allUpperCase(e)?l=l.toUpperCase():r.default.capitalized(e)&&(l=r.default.capitalize(l))),i.cfg.substitutionMark&&(l="["+l+"]"),u&&(l=d[0]+l+d[2]),l}))});break;case 2:i.wordRegExps.forEach((o,s)=>{e=e.replace(o,(function(e,...o){let a=o.pop(),n=o.pop(),d=o,u=d.length>0;return u&&(e=d[1]),i.checkWhitelist(e.trim(),a,n,s)?e:(t&&i.foundMatch(i.wordList[s]),u?(e=d[1],r.default.whitespaceRegExp.test(d[0])&&r.default.whitespaceRegExp.test(d[2])?d[0]:r.default.nonWordRegExp.test(d[0])||r.default.nonWordRegExp.test(d[2])?(d[0]+d[2]).trim():""):r.default.whitespaceRegExp.test(e[0])&&r.default.whitespaceRegExp.test(e[e.length-1])?e[0]:"")}))})}return e}}},function(e,t,i){"use strict";function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class r{static allLowerCase(e){return e.toLowerCase()===e}static allUpperCase(e){return e.toUpperCase()===e}static capitalize(e){return e.charAt(0).toUpperCase()+e.substr(1)}static capitalized(e){return e.charAt(0).toUpperCase()===e.charAt(0)}static containsDoubleByte(e){return!!e.length&&(e.charCodeAt(0)>127||r._unicodeRegExp.test(e))}static escapeRegExp(e){return e.replace(r._escapeRegExp,"\\$&")}static find(e){return"string"==typeof e?r.all[r.list.indexOf(e)]:"number"==typeof e?r.all[e]:void 0}static initWords(e,t={},i={}){r.all=[],r.list=[],r.regExps=[],t=Object.assign(r._defaultFilterOptions,t),r.filterMethod=t.filterMethod,r.globalMatchMethod=2===r.filterMethod?r.globalMatchMethod=3:t.globalMatchMethod,r.defaultWordOptions=Object.assign(r._defaultWordOptions,i),r.list=Object.keys(e).sort((e,t)=>t.length-e.length),r.list.forEach(t=>{let i=new r(t,e[t]);r.all.push(i),r.regExps.push(i.buildRegexp())})}constructor(e,t){o(this,"escaped",void 0),o(this,"matchMethod",void 0),o(this,"matchRepeated",void 0),o(this,"matchSeparators",void 0),o(this,"sub",void 0),o(this,"unicode",void 0),o(this,"value",void 0),this.value=e,this.matchMethod=3===r.globalMatchMethod?t.matchMethod:r.globalMatchMethod,this.matchRepeated=void 0===t.repeat?r.defaultWordOptions.repeat:t.repeat,this.matchSeparators=void 0===t.separators?r.defaultWordOptions.separators:t.separators,this.sub=null==t.sub?r.defaultWordOptions.sub:t.sub,this.unicode=r.containsDoubleByte(e),void 0===this.matchMethod&&r.defaultWordOptions.matchMethod,this.escaped=r.escapeRegExp(this.value)}buildRegexp(){let e=this;try{switch(e.matchMethod){case 0:return 2===r.filterMethod?e.unicode?new RegExp("(^|"+r._unicodeWordBoundary+")("+e.processedPhrase()+")("+r._unicodeWordBoundary+"|$)",e.regexOptions()):e.hasEdgePunctuation()?new RegExp("(^|\\s)("+e.processedPhrase()+")(\\s|$)",e.regexOptions()):new RegExp("\\s?\\b"+e.processedPhrase()+"\\b\\s?",e.regexOptions()):e.unicode?new RegExp("(^|"+r._unicodeWordBoundary+"+)("+e.processedPhrase()+")("+r._unicodeWordBoundary+"+|$)",e.regexOptions()):e.hasEdgePunctuation()?new RegExp("(^|\\s)("+e.processedPhrase()+")(\\s|$)",e.regexOptions()):new RegExp("\\b"+e.processedPhrase()+"\\b",e.regexOptions());case 2:return e.unicode?new RegExp("(^|"+r._unicodeWordBoundary+"*)([\\S]*"+e.processedPhrase()+"[\\S]*)("+r._unicodeWordBoundary+"*|$)",e.regexOptions()):e.hasEdgePunctuation()?new RegExp("(^|\\s)([\\S]*"+e.processedPhrase()+"[\\S]*)(\\s|$)",e.regexOptions()):new RegExp("\\b[\\w-]*"+e.processedPhrase()+"[\\w-]*\\b",e.regexOptions());case 4:return new RegExp(e.value,e.regexOptions());case 1:default:return 2===r.filterMethod?e.unicode?new RegExp("(^|"+r._unicodeWordBoundary+"?)([\\w-]*"+e.processedPhrase()+"[\\w-]*)("+r._unicodeWordBoundary+"?|$)",e.regexOptions()):e.hasEdgePunctuation()?new RegExp("(^|\\s)([\\w-]*"+e.processedPhrase()+"[\\w-]*)(\\s|$)",e.regexOptions()):new RegExp("\\s?\\b[\\w-]*"+e.processedPhrase()+"[\\w-]*\\b\\s?",e.regexOptions()):new RegExp(e.processedPhrase(),e.regexOptions())}}catch(t){throw new Error('Failed to create RegExp for "'+e.value+'" - '+t.name+" "+t.message)}}hasEdgePunctuation(){return r._edgePunctuationRegExp.test(this.value)}processedPhrase(){let e=this,t=e.escaped.includes("\\"),i="",o=e.escaped.length-1;for(let s=0;s<e.escaped.length;s++)t&&"\\"===e.escaped[s]&&(i+=e.escaped[s],s++),i+=e.escaped[s],e.matchRepeated&&(i+="+"),e.matchSeparators&&s!=o&&(i+=r.separatorsRegExp);return i}regexOptions(){let e="gi";return this.unicode&&(e+="u"),e}}t.default=r,o(r,"_defaultFilterOptions",{filterMethod:1,globalMatchMethod:3}),o(r,"_defaultWordOptions",{matchMethod:0,repeat:!1,separators:!1,sub:"censored"}),o(r,"_edgePunctuationRegExp",/(^[,.'"!?%$]|[,.'"!?%$]$)/),o(r,"_escapeRegExp",/[\/\\^$*+?.()|[\]{}]/g),o(r,"_unicodeRegExp",/[^\u0000-\u00ff]/),o(r,"_unicodeWordBoundary","[\\s.,'\"+!?|-]"),o(r,"nonWordRegExp",new RegExp("^\\s*[^\\w]+\\s*$","g")),o(r,"separatorsRegExp","[-_ ]*"),o(r,"whitespaceRegExp",/^\s+$/),o(r,"all",[]),o(r,"defaultWordOptions",r._defaultWordOptions),o(r,"filterMethod",r._defaultFilterOptions.filterMethod),o(r,"globalMatchMethod",r._defaultFilterOptions.globalMatchMethod),o(r,"list",[]),o(r,"regExps",[])},function(e,t,i){"use strict";function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class r{constructor(){o(this,"xpathDocText",void 0),o(this,"xpathNodeText",void 0)}static isForbiddenNode(e){return!!e.isContentEditable||(!(!e.parentNode||!e.parentNode.isContentEditable&&!r.forbiddenTags.includes(e.parentNode.nodeName))||r.forbiddenTags.includes(e.nodeName))}}t.default=r,o(r,"forbiddenNodeRegExp",new RegExp("^s*(<[a-z].+?/?>|{.+?:.+?;.*}|https?://[^s]+$)")),o(r,"forbiddenTags",["SCRIPT","STYLE","INPUT","TEXTAREA","IFRAME","LINK"])},function(e,t,i){"use strict";function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class r{constructor(e){o(this,"cueRuleIds",void 0),o(this,"filter",void 0),o(this,"lastFilteredNode",void 0),o(this,"lastFilteredText",void 0),o(this,"lastProcessed",void 0),o(this,"muted",void 0),o(this,"rules",void 0),o(this,"simpleUnmute",void 0),o(this,"sites",void 0),o(this,"supportedNode",void 0),o(this,"supportedPage",void 0),o(this,"unmuteDelay",void 0),o(this,"volume",void 0),o(this,"watcherRuleIds",void 0),o(this,"youTube",void 0),o(this,"youTubeAutoSubsMin",void 0),this.cueRuleIds=[],this.watcherRuleIds=[],this.filter=e,this.lastFilteredNode=null,this.lastFilteredText="",this.lastProcessed=[],this.muted=!1,e.cfg.customAudioSites&&"object"==typeof e.cfg.customAudioSites&&Object.keys(e.cfg.customAudioSites).length>0?this.sites=Object.assign(r.sites,e.cfg.customAudioSites):this.sites=r.sites,this.unmuteDelay=0,this.volume=1,this.youTubeAutoSubsMin=e.cfg.youTubeAutoSubsMin,this.rules=this.sites[e.hostname],this.rules&&(this.supportedPage=!0,"www.youtube.com"==e.hostname&&(this.youTube=!0),Array.isArray(this.rules)||(this.rules=[this.rules]),this.supportedNode=this.buildSupportedNodeFunction(),this.watcherRuleIds.length>0&&this.watcherRuleIds.forEach(e=>{setInterval(this.watcher,this.rules[e].checkInterval,this,e)}),this.cueRuleIds.length>0&&setInterval(this.watchForVideo,250,this))}buildSupportedNodeFunction(){let e="";return this.rules.forEach((t,i)=>{if(!(!0===t.iframe&&null==this.filter.iframe||!1===t.iframe&&null!=this.filter.iframe))switch(void 0===t.mode&&(t.mode="element"),void 0===t.filterSubtitles&&(t.filterSubtitles=!0),t.simpleUnmute&&(this.simpleUnmute=!0),void 0===t.muteMethod&&(t.muteMethod=this.filter.cfg.muteMethod),void 0===t.showSubtitles&&(t.showSubtitles=this.filter.cfg.showSubtitles),t.mode){case"cue":this.cueRuleIds.push(i),this.initCueRule(t);break;case"element":if(!t.tagName)throw"tagName is required.";e+=`\n          if (node.nodeName == '${t.tagName.toUpperCase()}') {\n            let failed = false;\n            ${t.className?`if (!failed && (!node.className || !node.className.includes('${t.className}'))) { failed = true; }`:""}\n            ${t.dataPropPresent?`if (!failed && (!node.dataset || !node.dataset.hasOwnProperty('${t.dataPropPresent}'))) { failed = true; }`:""}\n            ${t.hasChildrenElements?'if (!failed && (typeof node.childElementCount !== "number" || node.childElementCount < 1)) { failed = true; }':""}\n            ${t.subtitleSelector?`if (!failed && (typeof node.querySelector !== 'function' || !node.querySelector('${t.subtitleSelector}'))) { failed = true; }`:""}\n            ${t.containsSelector?`if (!failed && (typeof node.querySelector !== 'function' || !node.querySelector('${t.containsSelector}'))) { failed = true; }`:""}\n            if (!failed) {\n              return ${i};\n            }\n          }`;break;case"text":e+=`\n            if (node.nodeName === '#text') {\n              let parent = document.querySelector('${t.parentSelector}');\n              if (parent && parent.contains(node)) { return ${i}; }\n            }`;break;case"watcher":this.watcherRuleIds.push(i),this.initWatcherRule(t),e+=`\n            if (node.parentElement && node.parentElement == document.querySelector('${t.subtitleSelector}')) { return ${i}; }\n            ${t.parentSelector?`let parent = document.querySelector('${t.parentSelector}'); if (parent && parent.contains(node)) { return ${i}; }`:""}\n          `}}),new Function("node",`${e} return false;`.replace(/^\s*\n/gm,""))}clean(e,t=0){let i=this.rules[t];if("watcher"===i.mode)return null;let o=!1;e.nodeName&&"#text"===e.nodeName&&e.parentElement&&(e=e.parentElement);let r=i.subtitleSelector&&e.querySelectorAll?e.querySelectorAll(i.subtitleSelector):[e];switch(r.forEach(e=>{let t="#text"===e.nodeName?"textContent":"innerText",r=this.filter.replaceTextResult(e[t]);r.modified&&(o=!0,this.mute(i.muteMethod),i.filterSubtitles&&(e[t]=r.filtered),this.lastFilteredNode=e,this.lastFilteredText=e[t])}),i.showSubtitles){case 1:o||this.hideElementSubtitles(r,i);break;case 2:o&&this.hideElementSubtitles(r,i);break;case 3:this.hideElementSubtitles(r,i)}}cleanYouTubeAutoSubs(e){let t=this.filter.replaceTextResult(e.textContent);if(t.modified)e.textContent=t.filtered,this.mute(),this.unmuteDelay=null,this.filter.updateCounterBadge();else if(this.muted)if(this.youTubeAutoSubsMin>0){let e=document.getElementsByTagName("video")[0].currentTime;null==this.unmuteDelay?this.unmuteDelay=e:(e<this.unmuteDelay&&(this.unmuteDelay=0),e>this.unmuteDelay+this.youTubeAutoSubsMin&&this.unmute())}else this.unmute();if(0!=this.filter.cfg.showSubtitles){let e=document.querySelector("div.ytp-caption-window-rollup span.captions-text");"block"==e.style.display&&(e.style.display="none")}}getVideoTextTrack(e,t,i=!0){if(e.textTracks&&e.textTracks.length>0)for(let o=0;o<e.textTracks.length;o++)if(t){if(t==e.textTracks[o].language&&(!i||i&&"showing"===e.textTracks[o].mode))return e.textTracks[o]}else if(!i||i&&"showing"===e.textTracks[o].mode)return e.textTracks[o]}hideElementSubtitles(e,t){e.forEach(e=>{e.innerText="",t.removeSubtitleSpacing&&e.style&&(e.style.padding&&(e.style.padding=0),e.style.margin&&(e.style.margin=0))})}initCueRule(e){void 0===e.videoSelector&&(e.videoSelector="video"),void 0===e.videoCueRequireShowing&&(e.videoCueRequireShowing=this.filter.cfg.muteCueRequireShowing)}initWatcherRule(e){void 0===e.checkInterval&&(e.checkInterval=20),void 0===e.trackProcessed&&(e.trackProcessed=!0),void 0===e.videoSelector&&(e.videoSelector="video")}mute(e=this.filter.cfg.muteMethod,t){if(!this.muted)switch(this.muted=!0,e){case 0:chrome.runtime.sendMessage({mute:!0});break;case 1:t||(t=document.querySelector("video")),t&&null!=t.volume&&(this.volume=t.volume,t.volume=0)}}playing(e){return!!(e&&e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2)}processCues(e,t){for(let i=0;i<e.length;i++){let o=e[i];if(o.hasOwnProperty("filtered"))continue;t.videoCueSync&&(o.startTime+=t.videoCueSync,o.endTime+=t.videoCueSync);let r=this.filter.replaceTextResult(o.text);r.modified?(o.filtered=!0,o.originalText=o.text,o.text=r.filtered):o.filtered=!1}}unmute(e=this.filter.cfg.muteMethod,t){if(this.muted)switch(this.muted=!1,e){case 0:chrome.runtime.sendMessage({mute:!1});break;case 1:t||(t=document.querySelector("video")),t&&null!=t.volume&&(t.volume=this.volume)}}watcher(e,t=0){let i=e.rules[t],o=document.querySelector(i.videoSelector);if(o&&e.playing(o)){let t=document.querySelector(i.subtitleSelector);if(t&&t.textContent){let o=!1,r=!i.trackProcessed;if(t.hasChildNodes()){if(t.childNodes.forEach((s,a)=>{let n="#text"===(s&&s.nodeName)?"textContent":"innerText";if(!r)if(t.childNodes.length===e.lastProcessed.length){if(e.lastProcessed[a]===s[n])return!1;r=!0,e.lastProcessed.slice(0,a)}else r=!0,e.lastProcessed=[];if(s[n]){let t=e.filter.replaceTextResult(s[n]);t.modified&&(e.mute(i.muteMethod),o=!0,i.filterSubtitles&&(s[n]=t.filtered),e.lastFilteredNode=s,e.lastFilteredText=s[n])}i.trackProcessed&&e.lastProcessed.push(s[n])}),!r)return!1}else{let s="#text"===(t&&t.nodeName)?"textContent":"innerText";if(!r&&e.lastProcessed.includes(t[s]))return!1;if(t[s]&&e.lastFilteredText&&!t[s].contains(e.lastFilteredText)){let r=e.filter.replaceTextResult(t[s]);r.modified&&(e.mute(i.muteMethod),o=!0,i.filterSubtitles&&(t[s]=r.filtered),e.lastFilteredNode=t,e.lastFilteredText=t[s])}i.trackProcessed&&(e.lastProcessed=[t[s]])}let s="#text"===(t&&t.nodeName)?"textContent":"innerText";if(o||t[s].includes(e.lastFilteredText)||e.unmute(i.muteMethod),"#text"!==t.nodeName)switch(i.showSubtitles){case 1:t.style.display=o?"":"none";break;case 2:t.style.display=o?"none":"";break;case 3:t.style.display="none"}o&&e.filter.updateCounterBadge()}}}watchForVideo(e){e.cueRuleIds.forEach(t=>{let i=e.rules[t],o=document.querySelector(i.videoSelector);if(o&&o.textTracks&&e.playing(o)){let t=e.getVideoTextTrack(o,i.videoCueLanguage,i.videoCueRequireShowing);t&&!t.oncuechange&&(i.videoCueHideCues||3!=i.showSubtitles||(t.mode="hidden"),t.oncuechange=()=>{if(t.activeCues&&t.activeCues.length>0){let r=!1;for(let s=0;s<t.activeCues.length;s++){let a=t.activeCues[s];if(!a.hasOwnProperty("filtered")){let o=t.cues;e.processCues(o,i)}a.filtered&&(r=!0,e.mute(i.muteMethod,o))}if(r||e.unmute(i.muteMethod,o),i.videoCueHideCues){if(1===i.showSubtitles&&!r||2===i.showSubtitles&&r||3===i.showSubtitles)for(let e=0;e<t.activeCues.length;e++){let i=t.activeCues[e];i.text="",i.position=100,i.size=0}}else if(r)switch(i.showSubtitles){case 1:t.mode="showing";break;case 2:t.mode="hidden"}else switch(i.showSubtitles){case 1:t.mode="hidden";break;case 2:t.mode="showing"}}else e.unmute(i.muteMethod,o)})}})}youTubeAutoSubsCurrentRow(e){return!(e.parentElement.parentElement!=e.parentElement.parentElement.parentElement.lastChild)}youTubeAutoSubsNodeIsSubtitleText(e){let t=document.querySelector("div.caption-window");return!(!t||!t.contains(e))}youTubeAutoSubsPresent(){return!!document.querySelector("div.ytp-caption-window-rollup")}youTubeAutoSubsSupportedNode(e){return"#text"==e.nodeName&&""!=e.textContent&&!!this.youTubeAutoSubsNodeIsSubtitleText(e)}}t.default=r,o(r,"sites",{"abc.com":[{mode:"element",className:"akamai-caption-text",tagName:"DIV"}],"www.amazon.com":[{mode:"watcher",iframe:!1,parentSelector:"div.webPlayer div.persistentPanel",showSubtitles:0,simpleUnmute:!0,subtitleSelector:"div.webPlayer div.persistentPanel > div > div > div > p > span > span"}],"www.amc.com":[{mode:"element",className:"ttr-container",subtitleSelector:"span.ttr-cue",tagName:"DIV"},{mode:"cue",videoCueLanguage:"en",videoSelector:"video"}],"www.att.tv":[{mode:"cue",videoSelector:"video#quickplayPlayer"}],"www.attwatchtv.com":[{mode:"cue",videoSelector:"video#quickplayPlayer"}],"www.cbs.com":[{mode:"cue",videoCueLanguage:"en",videoCueRequireShowing:!1}],"www.dishanywhere.com":[{mode:"element",className:"bmpui-ui-subtitle-label",tagName:"SPAN"},{mode:"element",className:"bmpui-subtitle-region-container",subtitleSelector:"div.bmpui-container-wrapper > span.bmpui-ui-subtitle-label",tagName:"div"}],"www.disneyplus.com":[{mode:"cue",videoSelector:"video.btm-media-client-element"}],"www.fox.com":[{mode:"element",className:"jw-text-track-container",subtitleSelector:"div.jw-text-track-cue",tagName:"DIV"}],"www.hulu.com":[{mode:"element",className:"caption-text-box",subtitleSelector:"p",tagName:"DIV"}],"www.nbc.com":[{mode:"element",className:"ttr-line",subtitleSelector:"span.ttr-cue",tagName:"DIV"},{mode:"cue",videoCueLanguage:"en"}],"www.netflix.com":[{mode:"element",className:"player-timedtext-text-container",subtitleSelector:"span",tagName:"DIV"}],"www.philo.com":[{mode:"cue"}],"app.plex.tv":[{mode:"element",dataPropPresent:"dialogueId",subtitleSelector:"span > span",tagName:"DIV"},{mode:"element",containsSelector:"div[data-dialogue-id]",subtitleSelector:"span > span",tagName:"DIV"}],"www.sonycrackle.com":[{mode:"text",parentSelector:"div.clpp-subtitles-container"}],"play.stan.com.au":[{mode:"text",parentSelector:"div.clpp-subtitles-container"}],"www.syfy.com":[{mode:"element",className:"ttr-line",subtitleSelector:"span.ttr-cue",tagName:"DIV"}],"www.tntdrama.com":[{mode:"cue",videoCueLanguage:"en",videoSelector:"video.top-media-element"}],"www.universalkids.com":[{mode:"element",subtitleSelector:"div.gwt-HTML",tagName:"DIV"}],"www.usanetwork.com":[{mode:"element",className:"ttr-line",subtitleSelector:"span.ttr-cue",tagName:"DIV"}],"www.vudu.com":[{mode:"element",subtitleSelector:"span.subtitles",tagName:"DIV"}],"www.youtube.com":[{mode:"element",className:"caption-window",subtitleSelector:"span.ytp-caption-segment",tagName:"DIV"}]})},function(e,t,i){"use strict";function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class r{constructor(e={}){o(this,"advancedDomains",void 0),o(this,"censorCharacter",void 0),o(this,"censorFixedLength",void 0),o(this,"customAudioSites",void 0),o(this,"defaultSubstitution",void 0),o(this,"defaultWordMatchMethod",void 0),o(this,"defaultWordRepeat",void 0),o(this,"defaultWordSeparators",void 0),o(this,"disabledDomains",void 0),o(this,"enabledDomains",void 0),o(this,"enabledDomainsOnly",void 0),o(this,"filterMethod",void 0),o(this,"filterWordList",void 0),o(this,"globalMatchMethod",void 0),o(this,"iWordWhitelist",void 0),o(this,"muteAudio",void 0),o(this,"muteAudioOnly",void 0),o(this,"muteMethod",void 0),o(this,"muteCueRequireShowing",void 0),o(this,"password",void 0),o(this,"preserveCase",void 0),o(this,"preserveFirst",void 0),o(this,"preserveLast",void 0),o(this,"showCounter",void 0),o(this,"showSubtitles",void 0),o(this,"showSummary",void 0),o(this,"showUpdateNotification",void 0),o(this,"substitutionMark",void 0),o(this,"words",void 0),o(this,"wordWhitelist",void 0),o(this,"youTubeAutoSubsMin",void 0),Object.assign(this,r._defaults,e)}addWord(e,t){return e=e.trim().toLowerCase(),!Object.keys(this.words).includes(e)&&(t?(t.sub=t.sub.trim().toLowerCase(),this.words[e]=t,!0):(this.words[e]={matchMethod:this.defaultWordMatchMethod,repeat:this.defaultWordRepeat,separators:this.defaultWordSeparators,sub:""},!0))}removeWord(e){return e=e.trim().toLowerCase(),!!Object.keys(this.words).includes(e)&&(delete this.words[e],!0)}repeatForWord(e){return!0===this.words[e].repeat||!1===this.words[e].repeat?this.words[e].repeat:this.defaultWordRepeat}sanitizeWords(){let e={};Object.keys(this.words).sort().forEach(t=>{e[t.trim().toLowerCase()]=this.words[t]}),this.words=e}}t.default=r,o(r,"filterMethods",{censor:0,substitute:1,remove:2}),o(r,"matchMethods",{exact:0,partial:1,whole:2,"Per-Word":3,RegExp:4}),o(r,"_defaults",{advancedDomains:[],censorCharacter:"*",censorFixedLength:0,customAudioSites:null,defaultSubstitution:"censored",defaultWordMatchMethod:0,defaultWordRepeat:!1,defaultWordSeparators:!1,disabledDomains:[],enabledDomains:[],enabledDomainsOnly:!1,filterMethod:1,filterWordList:!0,globalMatchMethod:3,iWordWhitelist:[],muteAudio:!1,muteAudioOnly:!1,muteMethod:0,muteCueRequireShowing:!0,password:null,preserveCase:!0,preserveFirst:!0,preserveLast:!1,showCounter:!0,showSubtitles:0,showSummary:!0,showUpdateNotification:!0,substitutionMark:!1,wordWhitelist:[],youTubeAutoSubsMin:0}),o(r,"_defaultWords",{ass:{matchMethod:0,repeat:!0,separators:!1,sub:"butt"},asses:{matchMethod:0,repeat:!1,separators:!1,sub:"butts"},asshole:{matchMethod:1,repeat:!0,separators:!1,sub:"jerk"},badass:{matchMethod:1,repeat:!0,separators:!0,sub:"cool"},bastard:{matchMethod:1,repeat:!0,separators:!1,sub:"idiot"},bitch:{matchMethod:1,repeat:!0,separators:!1,sub:"bench"},cocksucker:{matchMethod:1,repeat:!0,separators:!0,sub:"suckup"},cunt:{matchMethod:1,repeat:!0,separators:!1,sub:"expletive"},dammit:{matchMethod:1,repeat:!1,separators:!0,sub:"dangit"},damn:{matchMethod:1,repeat:!1,separators:!1,sub:"dang"},dumbass:{matchMethod:1,repeat:!0,separators:!1,sub:"idiot"},fag:{matchMethod:0,repeat:!0,separators:!1,sub:"gay"},faggot:{matchMethod:1,repeat:!0,separators:!1,sub:"gay"},fags:{matchMethod:0,repeat:!0,separators:!1,sub:"gays"},fuck:{matchMethod:1,repeat:!0,separators:!0,sub:"freak"},goddammit:{matchMethod:1,repeat:!0,separators:!0,sub:"dangit"},hell:{matchMethod:0,repeat:!1,separators:!1,sub:"heck"},jackass:{matchMethod:1,repeat:!0,separators:!0,sub:"jerk"},nigga:{matchMethod:0,repeat:!0,separators:!1,sub:"bruh"},nigger:{matchMethod:0,repeat:!0,separators:!1,sub:"man"},niggers:{matchMethod:0,repeat:!0,separators:!1,sub:"people"},piss:{matchMethod:1,repeat:!0,separators:!1,sub:"pee"},pissed:{matchMethod:1,repeat:!0,separators:!1,sub:"ticked"},pussies:{matchMethod:0,repeat:!0,separators:!1,sub:"softies"},pussy:{matchMethod:0,repeat:!0,separators:!1,sub:"softie"},shit:{matchMethod:1,repeat:!0,separators:!1,sub:"crap"},slut:{matchMethod:1,repeat:!0,separators:!1,sub:"tramp"},tits:{matchMethod:1,repeat:!0,separators:!1,sub:"chest"},twat:{matchMethod:0,repeat:!0,separators:!1,sub:"dumbo"},twats:{matchMethod:0,repeat:!0,separators:!1,sub:"dumbos"},whore:{matchMethod:1,repeat:!0,separators:!1,sub:"tramp"}}),o(r,"_filterMethodNames",["Censor","Substitute","Remove"]),o(r,"_matchMethodNames",["Exact","Partial","Whole","Per-Word","Regular-Expression"]),o(r,"_maxBytes",6500),o(r,"_maxWords",100),o(r,"_wordsPattern",/^_words\d+/)},function(e,t){
/**
 * findAndReplaceDOMText v 0.4.6
 * @author James Padolsey http://james.padolsey.com
 * @license http://unlicense.org/UNLICENSE
 *
 * Matches the text of a DOM node against a regular expression
 * and replaces each match (or node-separated portions of the match)
 * in the specified element.
 */
"undefined"!=typeof window&&(window.findAndReplaceDOMText=function(){var e="retain",t=document,i={}.hasOwnProperty;function o(){return r.apply(null,arguments)||s.apply(null,arguments)}function r(e,t,i,r,a){if(t&&!t.nodeType&&arguments.length<=2)return!1;var n,d="function"==typeof i;d&&(n=i,i=function(e,t){return n(e.text,t.startIndex)});var u=s(t,{find:e,wrap:d?null:i,replace:d?i:"$"+(r||"&"),prepMatch:function(e,t){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(r>0){var i=e[r];e.index+=e[0].indexOf(i),e[0]=i}return e.endIndex=e.index+e[0].length,e.startIndex=e.index,e.index=t,e},filterElements:a});return o.revert=function(){return u.revert()},!0}function s(e,t){return new a(e,t)}function a(t,r){var s=r.preset&&o.PRESETS[r.preset];if(r.portionMode=r.portionMode||e,s)for(var a in s)i.call(s,a)&&!i.call(r,a)&&(r[a]=s[a]);this.node=t,this.options=r,this.prepMatch=r.prepMatch||this.prepMatch,this.reverts=[],this.matches=this.search(),this.matches.length&&this.processMatches()}return o.NON_PROSE_ELEMENTS={br:1,hr:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1},o.NON_CONTIGUOUS_PROSE_ELEMENTS={address:1,article:1,aside:1,blockquote:1,dd:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,nav:1,noscript:1,ol:1,output:1,p:1,pre:1,section:1,ul:1,br:1,li:1,summary:1,dt:1,details:1,rp:1,rt:1,rtc:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1,table:1,tbody:1,thead:1,th:1,tr:1,td:1,caption:1,col:1,tfoot:1,colgroup:1},o.NON_INLINE_PROSE=function(e){return i.call(o.NON_CONTIGUOUS_PROSE_ELEMENTS,e.nodeName.toLowerCase())},o.PRESETS={prose:{forceContext:o.NON_INLINE_PROSE,filterElements:function(e){return!i.call(o.NON_PROSE_ELEMENTS,e.nodeName.toLowerCase())}}},o.Finder=a,a.prototype={search:function(){var e,t=0,i=0,o=this.options.find,r=this.getAggregateText(),s=[],a=this;return o="string"==typeof o?RegExp(String(o).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1"),"g"):o,function r(n){for(var d=0,u=n.length;d<u;++d){var l=n[d];if("string"==typeof l){if(o.global)for(;e=o.exec(l);)s.push(a.prepMatch(e,t++,i));else(e=l.match(o))&&s.push(a.prepMatch(e,0,i));i+=l.length}else r(l)}}(r),s},prepMatch:function(e,t,i){if(!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return e.endIndex=i+e.index+e[0].length,e.startIndex=i+e.index,e.index=t,e},getAggregateText:function(){var e=this.options.filterElements,t=this.options.forceContext;return function i(o){if(o.nodeType===Node.TEXT_NODE)return[o.data];if(e&&!e(o))return[];var r=[""],s=0;if(o=o.firstChild)do{if(o.nodeType!==Node.TEXT_NODE){var a=i(o);t&&o.nodeType===Node.ELEMENT_NODE&&(!0===t||t(o))?(r[++s]=a,r[++s]=""):("string"==typeof a[0]&&(r[s]+=a.shift()),a.length&&(r[++s]=a,r[++s]=""))}else r[s]+=o.data}while(o=o.nextSibling);return r}(this.node)},processMatches:function(){var e,t,i,o=this.matches,r=this.node,s=this.options.filterElements,a=[],n=r,d=o.shift(),u=0,l=0,c=[r];e:for(;;){if(n.nodeType===Node.TEXT_NODE&&(!t&&n.length+u>=d.endIndex?t={node:n,index:l++,text:n.data.substring(d.startIndex-u,d.endIndex-u),indexInMatch:0===u?0:u-d.startIndex,indexInNode:d.startIndex-u,endIndexInNode:d.endIndex-u,isEnd:!0}:e&&a.push({node:n,index:l++,text:n.data,indexInMatch:u-d.startIndex,indexInNode:0}),!e&&n.length+u>d.startIndex&&(e={node:n,index:l++,indexInMatch:0,indexInNode:d.startIndex-u,endIndexInNode:d.endIndex-u,text:n.data.substring(d.startIndex-u,d.endIndex-u)}),u+=n.data.length),i=n.nodeType===Node.ELEMENT_NODE&&s&&!s(n),e&&t){if(n=this.replaceMatch(d,e,a,t),u-=t.node.data.length-t.endIndexInNode,e=null,t=null,a=[],l=0,!(d=o.shift()))break}else if(!i&&(n.firstChild||n.nextSibling)){n.firstChild?(c.push(n),n=n.firstChild):n=n.nextSibling;continue}for(;;){if(n.nextSibling){n=n.nextSibling;break}if((n=c.pop())===r)break e}}},revert:function(){for(var e=this.reverts.length;e--;)this.reverts[e]();this.reverts=[]},prepareReplacementString:function(e,t,i){var o=this.options.portionMode;return"first"===o&&t.indexInMatch>0?"":(e=e.replace(/\$(\d+|&|`|')/g,(function(e,t){var o;switch(t){case"&":o=i[0];break;case"`":o=i.input.substring(0,i.startIndex);break;case"'":o=i.input.substring(i.endIndex);break;default:o=i[+t]||""}return o})),"first"===o?e:t.isEnd?e.substring(t.indexInMatch):e.substring(t.indexInMatch,t.indexInMatch+t.text.length))},getPortionReplacementNode:function(e,i){var o=this.options.replace||"$&",r=this.options.wrap,s=this.options.wrapClass;if(r&&r.nodeType){var a=t.createElement("div");a.innerHTML=r.outerHTML||(new XMLSerializer).serializeToString(r),r=a.firstChild}if("function"==typeof o)return(o=o(e,i))&&o.nodeType?o:t.createTextNode(String(o));var n="string"==typeof r?t.createElement(r):r;return n&&s&&(n.className=s),(o=t.createTextNode(this.prepareReplacementString(o,e,i))).data&&n?(n.appendChild(o),n):o},replaceMatch:function(e,i,o,r){var s,a,n=i.node,d=r.node;if(n===d){var u=n;i.indexInNode>0&&(s=t.createTextNode(u.data.substring(0,i.indexInNode)),u.parentNode.insertBefore(s,u));var l=this.getPortionReplacementNode(r,e);return u.parentNode.insertBefore(l,u),r.endIndexInNode<u.length&&(a=t.createTextNode(u.data.substring(r.endIndexInNode)),u.parentNode.insertBefore(a,u)),u.parentNode.removeChild(u),this.reverts.push((function(){s===l.previousSibling&&s.parentNode.removeChild(s),a===l.nextSibling&&a.parentNode.removeChild(a),l.parentNode.replaceChild(u,l)})),l}s=t.createTextNode(n.data.substring(0,i.indexInNode)),a=t.createTextNode(d.data.substring(r.endIndexInNode));for(var c=this.getPortionReplacementNode(i,e),h=[],p=0,f=o.length;p<f;++p){var m=o[p],g=this.getPortionReplacementNode(m,e);m.node.parentNode.replaceChild(g,m.node),this.reverts.push(function(e,t){return function(){t.parentNode.replaceChild(e.node,t)}}(m,g)),h.push(g)}var b=this.getPortionReplacementNode(r,e);return n.parentNode.insertBefore(s,n),n.parentNode.insertBefore(c,n),n.parentNode.removeChild(n),d.parentNode.insertBefore(b,d),d.parentNode.insertBefore(a,d),d.parentNode.removeChild(d),this.reverts.push((function(){s.parentNode.removeChild(s),c.parentNode.replaceChild(n,c),a.parentNode.removeChild(a),b.parentNode.replaceChild(d,b)})),b}},o}())}]);